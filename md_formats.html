<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>gr1c: File formats</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="gr1cdoc.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">gr1c
   &#160;<span id="projectnumber">0.7.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">File formats </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The purpose of this page is to describe the file formats supported by gr1c, besides the <a href="md_spc_format.html">format of input specifications</a>. The command-line argument "-t" is used to specify the format in which to output the synthesized strategy. A key to the choices, including functions that provide it, is:</p>
<ul>
<li><code>txt</code> : simple plaintext format (not standard); <a class="el" href="automaton_8h.html#acb0084e8abf09eed89cd7aa2acc03e15">list_aut_dump()</a></li>
<li><code>dot</code> : <a href="http://www.graphviz.org/">Graphviz dot</a>; <a class="el" href="automaton_8h.html#aa042707aac1b8820ab74ae4272068284">dot_aut_dump()</a></li>
<li><code>aut</code> : <a href="#gr1cautformat">gr1c automaton format</a>; <a class="el" href="automaton_8h.html#a7280119d68f6970fc7146b20833ffd63">aut_aut_dump()</a></li>
<li><code>json</code> : <a href="#gr1cjson">strategy in JSON</a>; <a class="el" href="automaton_8h.html#acf8e5e021f2e1f64687936957440de5e">json_aut_dump()</a></li>
<li><code>tulip</code> : <a href="#tulipconxml">tulipcon XML</a>; <a class="el" href="automaton_8h.html#ad135af09f28e95ad66d501893df662d6">tulip_aut_dump()</a></li>
</ul>
<p>Several of the patching routines need to be given a description of changes to the game edge set. This is achieved using the <a href="#edgechangeset">edge changes file format</a>. The relevant command-line argument is "-e FILE".</p>
<h2 id="gr1cjson">strategy in JSON</h2>
<p>The gross file formatting is <a href="http://json.org/">JSON</a>. The details of what gr1c provides are versioned. The current and only version is zero. A key to entries is:</p>
<ul>
<li><code>version</code> : format version number</li>
<li><code>gr1c</code> : version of gr1c that generated the output</li>
<li><code>date</code> : timestamp in UTC; e.g., invocation time of <a class="el" href="automaton_8h.html#acf8e5e021f2e1f64687936957440de5e">json_aut_dump()</a></li>
<li><code>extra</code> : an arbitrary, printable string</li>
<li><code>nodes</code> : object of automaton nodes, each of which is uniquely named and has as value an object organized by the various members of <a class="el" href="structanode__t.html" title="Strategy automaton nodes.">anode_t</a> (cf. <a class="el" href="automaton_8h.html" title="Routines for working with a strategy, as a finite automaton.">automaton.h</a>).</li>
</ul>
<p>Note that the notion of "object" in JSON maps to <code>dict</code> (i.e., "dictionary
objects") in Python. An example is the following. </p>
<pre class="fragment">{"version": 0,
 "gr1c": "0.7.2",
 "date": "2014-03-11 15:13:28",
 "extra": "Experiment trial number 1.",

 "ENV": [{"x": "boolean"}],
 "SYS": [{"y": "boolean"}],

 "nodes": {
"0x101090": {
    "state": [0, 0],
    "mode": 0,
    "rgrad": 1,
    "trans": ["0x101040"] },
"0x101040": {
    "state": [1, 1],
    "mode": 1,
    "rgrad": 1,
    "trans": ["0x101090"] },
"0x101010": {
    "state": [0, 1],
    "mode": 0,
    "rgrad": 1,
    "trans": ["0x101040"] }
}}
</pre><h2 id="tulipconxml">tulipcon XML</h2>
<p>See <a href="http://slivingston.github.io/nTLP/doc/">nTLP documentation</a>, specifically the <a href="http://slivingston.github.io/nTLP/doc/data_formats.html#tulipcon-xml">page about data formats</a>.</p>
<h2 id="gr1cautformat">gr1c automaton</h2>
<p>This format is occasionally referred to as "gr1c aut format". The relevant command-line argument is "-a FILE". Note that version numbers of this format are independent (for most practical purposes) from the version of gr1c itself. For all versions, the version number is given as a single nonnegative integer on the first non-comment, non-blank line. In the case of a missing version number, <a href="#gr1cautformatv0">0 is assumed</a> (also known as the <a href="#gr1cautformatv0">legacy format</a>). Unless explicitly stated to the contrary in the format version description below, blank lines and lines beginning with <code>#</code> (known as "comments") are always ignored.</p>
<p>For this format, the API includes functions <a class="el" href="automaton_8h.html#aa88038233d4f53e8d4746c8d1bd12064">aut_aut_load()</a> and <a class="el" href="automaton_8h.html#a7280119d68f6970fc7146b20833ffd63">aut_aut_dump()</a> for reading and writing, respectively. Signatures are in <a class="el" href="automaton_8h.html" title="Routines for working with a strategy, as a finite automaton.">automaton.h</a>.</p>
<h3 id="gr1cautformatv0">version 0 (legacy)</h3>
<p>The order of the state vector matches that from the specification (as in most other places in the source code). Each line is of the form </p>
<pre class="fragment">i S m r t0 t1 ...
</pre><p>where i is the node ID, S is a space-separated list of values taken by variables at this node (i.e., its state label), m the goal mode, r is a reach annotation value (-1 if not available), and all remaining integers are IDs of nodes in the outgoing transition set of this node.</p>
<p>The list of IDs is assumed to be tight, meaning if there are N nodes, then the file must contain indices 0 through N-1 (not necessarily in order).</p>
<h2 id="edgechangeset">game edge set changes</h2>
<p>Files of this form consist of two parts: first a list (one per line) of states considered to be in the neighborhood; and second a sequence of <b>restrict</b>, <b>relax</b>, or <b>blocksys</b> commands (as defined in the section <a href="md_interaction.html">Interaction</a>). Blank lines and lines beginning with <code>#</code> are ignored.</p>
<p>For example, if there are two variables, and we have declared the "neighborhood" to consist of states 00, 01, and 11 (with states given as bitvectors), and we wish to change the game graph by removing the controlled edge from 00 to 01, then the file would be </p>
<pre class="fragment"># This is a comment.
0 0
0 1
1 1
restrict 0 0 0 1
</pre><p>If patching was successful, then the new strategy is output to stdout (in the format specified by the flag "-t" if given; else, the default). Otherwise, a nonzero integer is returned by the program. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 11 2014 11:49:53 for gr1c by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
